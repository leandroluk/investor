---
title: Login using credential
description: Authenticate user with email and password
---
import {MermaidZoom} from '#/components/molecules/MermaidZoom'

## Rules

- User provides email and password.
- System verifies credentials.
- If 2FA is enabled (`two_factor_enabled` is true), system returns a challenge token and a flag indicating 2FA is required.
- If 2FA is disabled, system returns access and refresh tokens.
- Logs the login attempt.

## Request

- Method: `POST`
- Path: `/auth/login/credential`
- Body:
  - `email`: User's email (required, email format)
  - `password`: User's password (required, string)

## Diagram

<MermaidZoom>
```mermaid
flowchart TD
  A["Client"] -- "POST /auth/login/credential" --> B["API"]
  B --> C{"Valid Credentials?"}
  C -- "No" --> D["Return 401 Unauthorized"]
  C -- "Yes" --> E{"2FA Enabled?"}
  E -- "Yes" --> F["Log Success (Challenge)"]
  F --> G["Return 200 OK (ChallengeToken, is2faRequired=true)"]
  E -- "No" --> H["Log Success (Full)"]
  H --> I["Return 200 OK (AccessToken, RefreshToken)"]
```
</MermaidZoom>

## Success Case (2FA Disabled)

- Status: `200 OK`
- Body:
```json
{
  "accessToken": "ey...",
  "refreshToken": "ey...",
  "expiresIn": 3600
}
```

## Success Case (2FA Enabled)

- Status: `200 OK`
- Body:
```json
{
  "challengeToken": "ey...",
  "is2faRequired": true
}
```

## Error Case

- Status: `401 Unauthorized`
- Body:
```json
{
  "statusCode": 401,
  "message": "Invalid credentials",
  "error": "Unauthorized"
}
```
