---
title: Send Activation Email
description: Send the activation email with a new OTP
---

import {MermaidZoom} from '#/components/molecules/MermaidZoom'

## Rules

- User submits their email address.
- If the user exists and status is `PENDING`, a new 6-digit OTP is generated and sent.
- If the user is already `ACTIVE`, a conflict error is returned.
- If the user does not exist, a 404 error is returned (typically).

## Request

`POST /account/activate`

### Body

| Field | Type | Description |
| :--- | :--- | :--- |
| email | string | User's email address |

## Diagram

<MermaidZoom>
```mermaid
flowchart TD
    A["Client"] -- "POST /account/activate" --> B["API"]
    B --> C{"User exists?"}
    C -- "No" --> D["Return 404 Not Found"]
    D --> End([End])
    C -- "Yes" --> E{"Status is PENDING?"}
    E -- "No" --> F["Return 409 Conflict"]
    F --> End
    E -- "Yes" --> G["Generate 6-digit OTP"]
    G --> H["Store OTP in cache for 15min"]
    H --> I["Render email template with OTP"]
    I --> J["Send activation email"]
    J --> K["Return 202 Accepted"]
    K --> End
```
</MermaidZoom>

## Success Case

`202 Accepted`

## Error Cases

### User Not Found

`404 Not Found`

### Already Active

`409 Conflict`
